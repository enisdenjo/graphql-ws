diff --git a/dist/cli.js b/dist/cli.js
index 0b4fa2e8ea536888965886802a2c8831812475aa..fdf167f57cd620b1dd674653b4d13cd508f6e1bc 100755
--- a/dist/cli.js
+++ b/dist/cli.js
@@ -34,4 +34,4 @@
 `+" ".repeat(e)),new Array(q).fill(0).map((u,e)=>"\r"+" ".repeat(e)),new Array(q).fill(0).map((u,e)=>`\r
 `+" ".repeat(e)),new Array(q).fill(0).map((u,e)=>`
 `+"	".repeat(e)),new Array(q).fill(0).map((u,e)=>"\r"+"	".repeat(e)),new Array(q).fill(0).map((u,e)=>`\r
-`+"	".repeat(e));var nu;(function(u){u.DEFAULT={allowTrailingComma:!1}})(nu||(nu={}));function AD(u,e=[],t=nu.DEFAULT){let D=null,r=[];const n=[];function o(i){Array.isArray(r)?r.push(i):D!==null&&(r[D]=i)}return s(o,"r"),F(o,"onValue"),bD(u,{onObjectBegin:F(()=>{const i={};o(i),n.push(r),r=i,D=null},"onObjectBegin"),onObjectProperty:F(i=>{D=i},"onObjectProperty"),onObjectEnd:F(()=>{r=n.pop()},"onObjectEnd"),onArrayBegin:F(()=>{const i=[];o(i),n.push(r),r=i,D=null},"onArrayBegin"),onArrayEnd:F(()=>{r=n.pop()},"onArrayEnd"),onLiteralValue:o,onError:F((i,a,l)=>{e.push({error:i,offset:a,length:l})},"onError")},t),r[0]}s(AD,"$e"),F(AD,"parse$1");function bD(u,e,t=nu.DEFAULT){const D=mD(u,!1),r=[];function n(A){return A?()=>A(D.getTokenOffset(),D.getTokenLength(),D.getTokenStartLine(),D.getTokenStartCharacter()):()=>!0}s(n,"s"),F(n,"toNoArgVisit");function o(A){return A?()=>A(D.getTokenOffset(),D.getTokenLength(),D.getTokenStartLine(),D.getTokenStartCharacter(),()=>r.slice()):()=>!0}s(o,"r"),F(o,"toNoArgVisitWithPath");function i(A){return A?$=>A($,D.getTokenOffset(),D.getTokenLength(),D.getTokenStartLine(),D.getTokenStartCharacter()):()=>!0}s(i,"f"),F(i,"toOneArgVisit");function a(A){return A?$=>A($,D.getTokenOffset(),D.getTokenLength(),D.getTokenStartLine(),D.getTokenStartCharacter(),()=>r.slice()):()=>!0}s(a,"u"),F(a,"toOneArgVisitWithPath");const l=o(e.onObjectBegin),f=a(e.onObjectProperty),C=n(e.onObjectEnd),c=o(e.onArrayBegin),d=n(e.onArrayEnd),E=a(e.onLiteralValue),g=i(e.onSeparator),b=n(e.onComment),k=i(e.onError),v=t&&t.disallowComments,p=t&&t.allowTrailingComma;function B(){for(;;){const A=D.scan();switch(D.getTokenError()){case 4:m(14);break;case 5:m(15);break;case 3:m(13);break;case 1:v||m(11);break;case 2:m(12);break;case 6:m(16);break}switch(A){case 12:case 13:v?m(10):b();break;case 16:m(1);break;case 15:case 14:break;default:return A}}}s(B,"m"),F(B,"scanNext");function m(A,$=[],_u=[]){if(k(A),$.length+_u.length>0){let Y=D.getToken();for(;Y!==17;){if($.indexOf(Y)!==-1){B();break}else if(_u.indexOf(Y)!==-1)break;Y=B()}}}s(m,"g"),F(m,"handleError");function y(A){const $=D.getTokenValue();return A?E($):(f($),r.push($)),B(),!0}s(y,"y"),F(y,"parseString");function w(){switch(D.getToken()){case 11:const A=D.getTokenValue();let $=Number(A);isNaN($)&&(m(2),$=0),E($);break;case 7:E(null);break;case 8:E(!0);break;case 9:E(!1);break;default:return!1}return B(),!0}s(w,"j"),F(w,"parseLiteral");function lu(){return D.getToken()!==10?(m(3,[],[2,5]),!1):(y(!1),D.getToken()===6?(g(":"),B(),H()||m(4,[],[2,5])):m(5,[],[2,5]),r.pop(),!0)}s(lu,"ke"),F(lu,"parseProperty");function Iu(){l(),B();let A=!1;for(;D.getToken()!==2&&D.getToken()!==17;){if(D.getToken()===5){if(A||m(4,[],[]),g(","),B(),D.getToken()===2&&p)break}else A&&m(6,[],[]);lu()||m(4,[],[2,5]),A=!0}return C(),D.getToken()!==2?m(7,[2],[]):B(),!0}s(Iu,"be"),F(Iu,"parseObject");function Ru(){c(),B();let A=!0,$=!1;for(;D.getToken()!==4&&D.getToken()!==17;){if(D.getToken()===5){if($||m(4,[],[]),g(","),B(),D.getToken()===4&&p)break}else $&&m(6,[],[]);A?(r.push(0),A=!1):r[r.length-1]++,H()||m(4,[],[4,5]),$=!0}return d(),A||r.pop(),D.getToken()!==4?m(8,[4],[]):B(),!0}s(Ru,"we"),F(Ru,"parseArray");function H(){switch(D.getToken()){case 3:return Ru();case 1:return Iu();case 10:return y(!0);default:return w()}}return s(H,"V"),F(H,"parseValue"),B(),D.getToken()===17?t.allowEmptyContent?!0:(m(4,[],[]),!1):H()?(D.getToken()!==17&&m(9,[],[]),!0):(m(4,[],[]),!1)}s(bD,"ye"),F(bD,"visit");var yD;(function(u){u[u.None=0]="None",u[u.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",u[u.UnexpectedEndOfString=2]="UnexpectedEndOfString",u[u.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",u[u.InvalidUnicode=4]="InvalidUnicode",u[u.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",u[u.InvalidCharacter=6]="InvalidCharacter"})(yD||(yD={}));var wD;(function(u){u[u.OpenBraceToken=1]="OpenBraceToken",u[u.CloseBraceToken=2]="CloseBraceToken",u[u.OpenBracketToken=3]="OpenBracketToken",u[u.CloseBracketToken=4]="CloseBracketToken",u[u.CommaToken=5]="CommaToken",u[u.ColonToken=6]="ColonToken",u[u.NullKeyword=7]="NullKeyword",u[u.TrueKeyword=8]="TrueKeyword",u[u.FalseKeyword=9]="FalseKeyword",u[u.StringLiteral=10]="StringLiteral",u[u.NumericLiteral=11]="NumericLiteral",u[u.LineCommentTrivia=12]="LineCommentTrivia",u[u.BlockCommentTrivia=13]="BlockCommentTrivia",u[u.LineBreakTrivia=14]="LineBreakTrivia",u[u.Trivia=15]="Trivia",u[u.Unknown=16]="Unknown",u[u.EOF=17]="EOF"})(wD||(wD={}));const Zt=AD;var $D;(function(u){u[u.InvalidSymbol=1]="InvalidSymbol",u[u.InvalidNumberFormat=2]="InvalidNumberFormat",u[u.PropertyNameExpected=3]="PropertyNameExpected",u[u.ValueExpected=4]="ValueExpected",u[u.ColonExpected=5]="ColonExpected",u[u.CommaExpected=6]="CommaExpected",u[u.CloseBraceExpected=7]="CloseBraceExpected",u[u.CloseBracketExpected=8]="CloseBracketExpected",u[u.EndOfFileExpected=9]="EndOfFileExpected",u[u.InvalidCommentToken=10]="InvalidCommentToken",u[u.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",u[u.UnexpectedEndOfString=12]="UnexpectedEndOfString",u[u.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",u[u.InvalidUnicode=14]="InvalidUnicode",u[u.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",u[u.InvalidCharacter=16]="InvalidCharacter"})($D||($D={}));const vD=F((u,e)=>Zt(Jt(e,u,"utf8")),"readJsonc"),vu=Symbol("implicitBaseUrl"),N="${configDir}",Ht=F(()=>{const{findPnpApi:u}=Uu;return u&&u(process.cwd())},"getPnpApi"),xu=F((u,e,t,D)=>{const r=`resolveFromPackageJsonPath:${u}:${e}:${t}`;if(D!=null&&D.has(r))return D.get(r);const n=vD(u,D);if(!n)return;let o=e||"tsconfig.json";if(!t&&n.exports)try{const[i]=Gt(n.exports,e,["require","types"]);o=i}catch{return!1}else!e&&n.tsconfig&&(o=n.tsconfig);return o=h.join(u,"..",o),D?.set(r,o),o},"resolveFromPackageJsonPath"),Ou="package.json",ku="tsconfig.json",Yt=F((u,e,t)=>{let D=u;if(u===".."&&(D=h.join(D,ku)),u[0]==="."&&(D=h.resolve(e,D)),h.isAbsolute(D)){if(j(t,D)){if(tu(t,D).isFile())return D}else if(!D.endsWith(".json")){const d=`${D}.json`;if(j(t,d))return d}return}const[r,...n]=u.split("/"),o=r[0]==="@"?`${r}/${n.shift()}`:r,i=n.join("/"),a=Ht();if(a){const{resolveRequest:d}=a;try{if(o===u){const E=d(h.join(o,Ou),e);if(E){const g=xu(E,i,!1,t);if(g&&j(t,g))return g}}else{let E;try{E=d(u,e,{extensions:[".json"]})}catch{E=d(h.join(u,ku),e)}if(E)return E}}catch{}}const l=gD(h.resolve(e),h.join("node_modules",o),t);if(!l||!tu(t,l).isDirectory())return;const f=h.join(l,Ou);if(j(t,f)){const d=xu(f,i,!1,t);if(d===!1)return;if(d&&j(t,d)&&tu(t,d).isFile())return d}const C=h.join(l,i),c=C.endsWith(".json");if(!c){const d=`${C}.json`;if(j(t,d))return d}if(j(t,C)){if(tu(t,C).isDirectory()){const d=h.join(C,Ou);if(j(t,d)){const g=xu(d,"",!0,t);if(g&&j(t,g))return g}const E=h.join(C,ku);if(j(t,E))return E}else if(c)return C}},"resolveExtendsPath"),ju=F((u,e)=>$u(h.relative(u,e)),"pathRelative"),xD=["files","include","exclude"],Qt=F((u,e,t,D)=>{const r=Yt(u,e,D);if(!r)throw new Error(`File '${u}' not found.`);if(t.has(r))throw new Error(`Circularity detected while resolving configuration: ${r}`);t.add(r);const n=h.dirname(r),o=OD(r,D,t);delete o.references;const{compilerOptions:i}=o;if(i){const{baseUrl:a}=i;a&&!a.startsWith(N)&&(i.baseUrl=O(h.relative(e,h.join(n,a)))||"./");let{outDir:l}=i;l&&(l.startsWith(N)||(l=h.relative(e,h.join(n,l))),i.outDir=O(l)||"./")}for(const a of xD){const l=o[a];l&&(o[a]=l.map(f=>f.startsWith(N)?f:O(h.relative(e,h.join(n,f)))))}return o},"resolveExtends"),Xt=["outDir","declarationDir"],OD=F((u,e,t=new Set)=>{let D;try{D=vD(u,e)||{}}catch{throw new Error(`Cannot resolve tsconfig at path: ${u}`)}if(typeof D!="object")throw new SyntaxError(`Failed to parse tsconfig at: ${u}`);const r=h.dirname(u);if(D.compilerOptions){const{compilerOptions:n}=D;n.paths&&!n.baseUrl&&(n[vu]=r)}if(D.extends){const n=Array.isArray(D.extends)?D.extends:[D.extends];delete D.extends;for(const o of n.reverse()){const i=Qt(o,r,new Set(t),e),a={...i,...D,compilerOptions:{...i.compilerOptions,...D.compilerOptions}};i.watchOptions&&(a.watchOptions={...i.watchOptions,...D.watchOptions}),D=a}}if(D.compilerOptions){const{compilerOptions:n}=D,o=["baseUrl","rootDir"];for(const i of o){const a=n[i];if(a&&!a.startsWith(N)){const l=h.resolve(r,a),f=ju(r,l);n[i]=f}}for(const i of Xt){let a=n[i];a&&(Array.isArray(D.exclude)||(D.exclude=[]),D.exclude.includes(a)||D.exclude.push(a),a.startsWith(N)||(a=$u(a)),n[i]=a)}}else D.compilerOptions={};if(D.include?(D.include=D.include.map(O),D.files&&delete D.files):D.files&&(D.files=D.files.map(n=>n.startsWith(N)?n:$u(n))),D.watchOptions){const{watchOptions:n}=D;n.excludeDirectories&&(n.excludeDirectories=n.excludeDirectories.map(o=>O(h.resolve(r,o))))}return D},"_parseTsconfig"),ou=F((u,e)=>{if(u.startsWith(N))return O(h.join(e,u.slice(N.length)))},"interpolateConfigDir"),ur=["outDir","declarationDir","outFile","rootDir","baseUrl","tsBuildInfoFile"],kD=F((u,e=new Map)=>{const t=h.resolve(u),D=OD(t,e),r=h.dirname(t),{compilerOptions:n}=D;if(n){for(const i of ur){const a=n[i];if(a){const l=ou(a,r);n[i]=l?ju(r,l):a}}for(const i of["rootDirs","typeRoots"]){const a=n[i];a&&(n[i]=a.map(l=>{const f=ou(l,r);return f?ju(r,f):l}))}const{paths:o}=n;if(o)for(const i of Object.keys(o))o[i]=o[i].map(a=>{var l;return(l=ou(a,r))!=null?l:a})}for(const o of xD){const i=D[o];i&&(D[o]=i.map(a=>{var l;return(l=ou(a,r))!=null?l:a}))}return D},"parseTsconfig"),Dr=F((u=process.cwd(),e="tsconfig.json",t=new Map)=>{const D=gD(O(u),e,t);if(!D)return null;const r=kD(D,t);return{path:D,config:r}},"getTsconfig"),er=/\*/g,jD=F((u,e)=>{const t=u.match(er);if(t&&t.length>1)throw new Error(e)},"assertStarCount"),tr=F(u=>{if(u.includes("*")){const[e,t]=u.split("*");return{prefix:e,suffix:t}}return u},"parsePattern"),rr=F(({prefix:u,suffix:e},t)=>t.startsWith(u)&&t.endsWith(e),"isPatternMatch"),nr=F((u,e,t)=>Object.entries(u).map(([D,r])=>(jD(D,`Pattern '${D}' can have at most one '*' character.`),{pattern:tr(D),substitutions:r.map(n=>{if(jD(n,`Substitution '${n}' in pattern '${D}' can have at most one '*' character.`),!e&&!wu.test(n))throw new Error("Non-relative paths are not allowed when 'baseUrl' is not set. Did you forget a leading './'?");return h.resolve(t,n)})})),"parsePaths"),or=F(u=>{const{compilerOptions:e}=u.config;if(!e)return null;const{baseUrl:t,paths:D}=e;if(!t&&!D)return null;const r=vu in e&&e[vu],n=h.resolve(h.dirname(u.path),t||r||"."),o=D?nr(D,t,n):[];return i=>{if(wu.test(i))return[];const a=[];for(const c of o){if(c.pattern===i)return c.substitutions.map(O);typeof c.pattern!="string"&&a.push(c)}let l,f=-1;for(const c of a)rr(c.pattern,i)&&c.pattern.prefix.length>f&&(f=c.pattern.prefix.length,l=c);if(!l)return t?[O(h.join(n,i))]:[];const C=i.slice(l.pattern.prefix.length,i.length-l.pattern.suffix.length);return l.substitutions.map(c=>O(c.replace("*",C)))}},"createPathsMatcher"),TD=F(u=>{let e="";for(let t=0;t<u.length;t+=1){const D=u[t],r=D.toUpperCase();e+=D===r?D.toLowerCase():r}return e},"s"),sr=65,ir=97,ar=F(()=>Math.floor(Math.random()*26),"m"),lr=F(u=>Array.from({length:u},()=>String.fromCodePoint(ar()+(Math.random()>.5?sr:ir))).join(""),"S"),cr=F((u=te)=>{const e=process.execPath;if(u.existsSync(e))return!u.existsSync(TD(e));const t=`/${lr(10)}`;u.writeFileSync(t,"");const D=!u.existsSync(TD(t));return u.unlinkSync(t),D},"l"),{join:su}=h.posix,Tu={ts:[".ts",".tsx",".d.ts"],cts:[".cts",".d.cts"],mts:[".mts",".d.mts"]},Fr=F(u=>{const e=[...Tu.ts],t=[...Tu.cts],D=[...Tu.mts];return u!=null&&u.allowJs&&(e.push(".js",".jsx"),t.push(".cjs"),D.push(".mjs")),[...e,...t,...D]},"getSupportedExtensions"),Cr=F(u=>{const e=[];if(!u)return e;const{outDir:t,declarationDir:D}=u;return t&&e.push(t),D&&e.push(D),e},"getDefaultExcludeSpec"),SD=F(u=>u.replaceAll(/[.*+?^${}()|[\]\\]/g,String.raw`\$&`),"escapeForRegexp"),fr=["node_modules","bower_components","jspm_packages"],Su=`(?!(${fr.join("|")})(/|$))`,pr=/(?:^|\/)[^.*?]+$/,PD="**/*",iu="[^/]",Pu="[^./]",ND=process.platform==="win32";F(({config:u,path:e},t=cr())=>{if("extends"in u)throw new Error("tsconfig#extends must be resolved. Use getTsconfig or parseTsconfig to resolve it.");if(!h.isAbsolute(e))throw new Error("The tsconfig path must be absolute");ND&&(e=O(e));const D=h.dirname(e),{files:r,include:n,exclude:o,compilerOptions:i}=u,a=r?.map(E=>su(D,E)),l=Fr(i),f=t?"":"i",C=(o||Cr(i)).map(E=>{const g=su(D,E),b=SD(g).replaceAll(String.raw`\*\*/`,"(.+/)?").replaceAll(String.raw`\*`,`${iu}*`).replaceAll(String.raw`\?`,iu);return new RegExp(`^${b}($|/)`,f)}),c=r||n?n:[PD],d=c?c.map(E=>{let g=su(D,E);pr.test(g)&&(g=su(g,PD));const b=SD(g).replaceAll(String.raw`/\*\*`,`(/${Su}${Pu}${iu}*)*?`).replaceAll(/(\/)?\\\*/g,(k,v)=>{const p=`(${Pu}|(\\.(?!min\\.js$))?)*`;return v?`/${Su}${Pu}${p}`:p}).replaceAll(/(\/)?\\\?/g,(k,v)=>{const p=iu;return v?`/${Su}${p}`:p});return new RegExp(`^${b}$`,f)}):void 0;return E=>{if(!h.isAbsolute(E))throw new Error("filePath must be absolute");if(ND&&(E=O(E)),a!=null&&a.includes(E)||!(!l.some(g=>E.endsWith(g))||C.some(g=>g.test(E)))&&d&&d.some(g=>g.test(E)))return u}},"createFilesMatcher");const ID="resolve-tsconfig-paths",Er=s(u=>u[0]===".","isRelative"),dr=s(u=>u[0]==="/"||/^[\s\S]:/.test(u),"isAbsolute"),hr=s(u=>u[0]==="#","isImports"),RD=s(u=>{const e=or(u);return e?{name:ID,async resolveId(t,D,r){if(!D||Er(t)||dr(t)||hr(t)||t.startsWith("\0"))return null;const n=e(t);for(const o of n){const i=await this.resolve(o,D,{skipSelf:!0,...r});if(i)return i}return null}}:{name:ID}},"resolveTsconfigPaths"),_D=/^#!.*/,gr=s(()=>({name:"strip-hashbang",transform:s(u=>{if(!_D.test(u))return null;const e=new qu(u);return e.replace(_D,""),{code:e.toString(),map:e.generateMap({hires:!0})}},"transform")}),"stripHashbang"),mr=["peerDependencies","dependencies","optionalDependencies"],Nu="@types/",LD=s((u,e,t=!1)=>{const D=[],{devDependencies:r}=u;for(const n of mr){const o=u[n];if(!o)continue;const i=Object.keys(o);for(const a of i)if(!(a in e))if(a.startsWith(Nu)){if(t){let l=a.slice(Nu.length);l.includes("__")&&(l=`@${l.replace("__","/")}`),D.push(l)}}else{if(r&&t){const l=Nu+a.replace("@","").replace("/","__");r[l]&&!(l in o)&&console.warn(`Recommendation: "${l}" is externalized because "${a}" is in "${n}". Place "${l}" in "${n}" as well so users don't have missing types.`)}D.push(a)}}return D.flatMap(n=>[n,new RegExp(`^${n}/`)])},"getExternalDependencies"),MD=s(u=>u.split("?")[0],"stripQuery"),WD={type:s(async(u,e)=>{const[t,D]=await Promise.all([Promise.resolve().then(function(){return require("./rollup-plugin-dts-wFwILfkI.js")}),Promise.resolve().then(function(){return require("./local-typescript-loader-DFqhlpcR.js")}).then(function(r){return r.localTypescriptLoader})]);return{input:[],preserveEntrySignatures:"strict",plugins:[fD(u),...e?[RD(e)]:[],pD(),t.default({respectExternal:!0,compilerOptions:{composite:!1,preserveSymlinks:!1,module:D.default.ModuleKind.Preserve,moduleResolution:D.default.ModuleResolutionKind.Bundler},tsconfig:e?.path})],output:[],external:[]}},"type"),app:s((u,e,t,D,r)=>{const n={target:u.target,tsconfigRaw:r?.config};return{input:[],preserveEntrySignatures:"strict",plugins:[fD(u),...r?[RD(r)]:[],pD(),XD({entries:e}),HD({extensions:[".mjs",".js",".ts",".jsx",".tsx",".json"],exportConditions:u.exportCondition}),...Object.keys(t).length>0?[Mu({preventAssignment:!0,objectGuards:!0,values:t})]:[],gr(),YD(),QD(),Pt(n),Tt(),ue({warnOnError:!0}),...u.minify?[It(n)]:[],Rt(D)],output:[],external:[]}},"app")},Br=s(async(u,e,t,D,r,n,o)=>{const i=t.filter(({exportEntry:c})=>c.isExecutable).map(({exportEntry:c})=>c.outputPath),a=Object.create(null),l=Object.fromEntries(D.env.map(({key:c,value:d})=>[`process.env.${c}`,JSON.stringify(d)])),f=LD(n,r),C=LD(n,r,!0);for(const{input:c,srcExtension:d,distExtension:E,exportEntry:g}of t){if(g.type==="types"){let B=a.type;B||(B=await WD.type(D,o),B.external=C,a.type=B),B.input.includes(c)||B.input.push(c),B.output.push({dir:e,entryFileNames:s(m=>S.realpathSync.native(MD(m.facadeModuleId)).slice(u.length,-d.length)+E,"entryFileNames"),exports:"auto",format:"esm"});continue}let b=a.app;b||(b=WD.app(D,r,l,i,o),b.external=f,a.app=b),b.input.includes(c)||b.input.push(c);const k=b.output,v=h.extname(g.outputPath),p=`${g.type}-${v}`;if(!k[p]){const B={dir:e,exports:"auto",format:g.type,chunkFileNames:`[name]-[hash]${v}`,sourcemap:D.sourcemap,plugins:[St(g.type==="module")],entryFileNames:s(m=>{const w=S.realpathSync.native(MD(m.facadeModuleId)).slice(u.length);return h.join(h.dirname(w),m.name)+E},"entryFileNames")};k.push(B),k[p]=B}}return a},"getRollupConfigs"),Ar=s(u=>{if(!u)return Dr();const e=h.resolve(u),t=kD(e);return{path:e,config:t}},"getTsconfig");let _=!0;const V=typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{};let J=0;if(V.process&&V.process.env&&V.process.stdout){const{FORCE_COLOR:u,NODE_DISABLE_COLORS:e,NO_COLOR:t,TERM:D,COLORTERM:r}=V.process.env;e||t||u==="0"?_=!1:u==="1"||u==="2"||u==="3"?_=!0:D==="dumb"?_=!1:"CI"in V.process.env&&["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(n=>n in V.process.env)?_=!0:_=process.stdout.isTTY,_&&(process.platform==="win32"||r&&(r==="truecolor"||r==="24bit")?J=3:D&&(D.endsWith("-256color")||D.endsWith("256"))?J=2:J=1)}let UD={enabled:_,supportLevel:J};function br(u,e,t=1){const D=`\x1B[${u}m`,r=`\x1B[${e}m`,n=new RegExp(`\\x1b\\[${e}m`,"g");return o=>UD.enabled&&UD.supportLevel>=t?D+(""+o).replace(n,D)+r:""+o}s(br,"kolorist");const yr=br(90,39),wr=s(()=>new Date().toLocaleTimeString(),"currentTime"),au=s((...u)=>console.log(`[${yr(wr())}]`,...u),"log"),$r=s(async u=>{await hu(u)&&await S.promises.rm(u,{recursive:!0,force:!0})},"cleanDist"),{stringify:qD}=JSON,L=At({name:"pkgroll",version:bt,flags:{src:{type:String,description:"Source directory",default:"./src"},dist:{type:String,description:"Distribution directory",default:"./dist"},minify:{type:Boolean,description:"Minify output",alias:"m",default:!1},target:{type:[String],default:[`node${process.versions.node}`],description:"Environments to support. `target` in tsconfig.json is automatically added. Defaults to the current Node.js version.",alias:"t"},tsconfig:{type:String,description:"Custom tsconfig.json file path",alias:"p"},watch:{type:Boolean,description:"Watch mode",alias:"w",default:!1},env:{type:[u=>{const[e,t]=u.split("=");return{key:e,value:t}}],description:"Compile-time environment variables (eg. --env.NODE_ENV=production)"},exportCondition:{type:[String],description:"Export conditions for resolving dependency export and import maps (eg. --export-condition=node)"},sourcemap:{type:s(u=>{if(u==="")return!0;if(u==="inline")return u;throw new Error(`Invalid sourcemap option ${qD(u)}`)},"type"),description:"Sourcemap generation. Provide `inline` option for inline sourcemap (eg. --sourcemap, --sourcemap=inline)"},cleanDist:{type:Boolean,description:"Clean dist before bundling",default:!1}},help:{description:"Minimalistic package bundler",render:s((u,e)=>(e.flagOperator=t=>t.name==="env"?".key=":" ",e.render(u)),"render")}}),VD=process.cwd(),zD=eu(L.flags.src,!0),Z=eu(L.flags.dist,!0),GD=Ar(L.flags.tsconfig),KD=GD?.config.compilerOptions?.target;KD&&L.flags.target.push(KD),(async()=>{const u=await yt(VD);let e=$t(u);if(e=e.filter(r=>{const n=r.outputPath.startsWith(Z);return n||console.warn(`Ignoring entry outside of ${Z} directory: package.json#${r.from}=${qD(r.outputPath)}`),n}),e.length===0)throw new Error("No export entries found in package.json");const t=await Promise.all(e.map(async r=>({...await jt(r,zD,Z),exportEntry:r}))),D=await Br(eu(S.realpathSync.native(zD),!0),Z,t,L.flags,vt(u,VD),u,GD);L.flags.cleanDist&&await $r(Z),L.flags.watch?(au("Watch initialized"),Object.values(D).map(async r=>{Lu.watch(r).on("event",async o=>{o.code==="BUNDLE_START"&&au("Building",...Array.isArray(o.input)?o.input:[o.input]),o.code==="BUNDLE_END"&&(await Promise.all(r.output.map(i=>o.result.write(i))),au("Built",...Array.isArray(o.input)?o.input:[o.input])),o.code==="ERROR"&&au("Error:",o.error.message)})})):await Promise.all(Object.values(D).map(async r=>{const n=await Lu.rollup(r);return Promise.all(r.output.map(o=>n.write(o)))}))})().catch(u=>{console.error(u),process.exit(1)});
+`+"	".repeat(e));var nu;(function(u){u.DEFAULT={allowTrailingComma:!1}})(nu||(nu={}));function AD(u,e=[],t=nu.DEFAULT){let D=null,r=[];const n=[];function o(i){Array.isArray(r)?r.push(i):D!==null&&(r[D]=i)}return s(o,"r"),F(o,"onValue"),bD(u,{onObjectBegin:F(()=>{const i={};o(i),n.push(r),r=i,D=null},"onObjectBegin"),onObjectProperty:F(i=>{D=i},"onObjectProperty"),onObjectEnd:F(()=>{r=n.pop()},"onObjectEnd"),onArrayBegin:F(()=>{const i=[];o(i),n.push(r),r=i,D=null},"onArrayBegin"),onArrayEnd:F(()=>{r=n.pop()},"onArrayEnd"),onLiteralValue:o,onError:F((i,a,l)=>{e.push({error:i,offset:a,length:l})},"onError")},t),r[0]}s(AD,"$e"),F(AD,"parse$1");function bD(u,e,t=nu.DEFAULT){const D=mD(u,!1),r=[];function n(A){return A?()=>A(D.getTokenOffset(),D.getTokenLength(),D.getTokenStartLine(),D.getTokenStartCharacter()):()=>!0}s(n,"s"),F(n,"toNoArgVisit");function o(A){return A?()=>A(D.getTokenOffset(),D.getTokenLength(),D.getTokenStartLine(),D.getTokenStartCharacter(),()=>r.slice()):()=>!0}s(o,"r"),F(o,"toNoArgVisitWithPath");function i(A){return A?$=>A($,D.getTokenOffset(),D.getTokenLength(),D.getTokenStartLine(),D.getTokenStartCharacter()):()=>!0}s(i,"f"),F(i,"toOneArgVisit");function a(A){return A?$=>A($,D.getTokenOffset(),D.getTokenLength(),D.getTokenStartLine(),D.getTokenStartCharacter(),()=>r.slice()):()=>!0}s(a,"u"),F(a,"toOneArgVisitWithPath");const l=o(e.onObjectBegin),f=a(e.onObjectProperty),C=n(e.onObjectEnd),c=o(e.onArrayBegin),d=n(e.onArrayEnd),E=a(e.onLiteralValue),g=i(e.onSeparator),b=n(e.onComment),k=i(e.onError),v=t&&t.disallowComments,p=t&&t.allowTrailingComma;function B(){for(;;){const A=D.scan();switch(D.getTokenError()){case 4:m(14);break;case 5:m(15);break;case 3:m(13);break;case 1:v||m(11);break;case 2:m(12);break;case 6:m(16);break}switch(A){case 12:case 13:v?m(10):b();break;case 16:m(1);break;case 15:case 14:break;default:return A}}}s(B,"m"),F(B,"scanNext");function m(A,$=[],_u=[]){if(k(A),$.length+_u.length>0){let Y=D.getToken();for(;Y!==17;){if($.indexOf(Y)!==-1){B();break}else if(_u.indexOf(Y)!==-1)break;Y=B()}}}s(m,"g"),F(m,"handleError");function y(A){const $=D.getTokenValue();return A?E($):(f($),r.push($)),B(),!0}s(y,"y"),F(y,"parseString");function w(){switch(D.getToken()){case 11:const A=D.getTokenValue();let $=Number(A);isNaN($)&&(m(2),$=0),E($);break;case 7:E(null);break;case 8:E(!0);break;case 9:E(!1);break;default:return!1}return B(),!0}s(w,"j"),F(w,"parseLiteral");function lu(){return D.getToken()!==10?(m(3,[],[2,5]),!1):(y(!1),D.getToken()===6?(g(":"),B(),H()||m(4,[],[2,5])):m(5,[],[2,5]),r.pop(),!0)}s(lu,"ke"),F(lu,"parseProperty");function Iu(){l(),B();let A=!1;for(;D.getToken()!==2&&D.getToken()!==17;){if(D.getToken()===5){if(A||m(4,[],[]),g(","),B(),D.getToken()===2&&p)break}else A&&m(6,[],[]);lu()||m(4,[],[2,5]),A=!0}return C(),D.getToken()!==2?m(7,[2],[]):B(),!0}s(Iu,"be"),F(Iu,"parseObject");function Ru(){c(),B();let A=!0,$=!1;for(;D.getToken()!==4&&D.getToken()!==17;){if(D.getToken()===5){if($||m(4,[],[]),g(","),B(),D.getToken()===4&&p)break}else $&&m(6,[],[]);A?(r.push(0),A=!1):r[r.length-1]++,H()||m(4,[],[4,5]),$=!0}return d(),A||r.pop(),D.getToken()!==4?m(8,[4],[]):B(),!0}s(Ru,"we"),F(Ru,"parseArray");function H(){switch(D.getToken()){case 3:return Ru();case 1:return Iu();case 10:return y(!0);default:return w()}}return s(H,"V"),F(H,"parseValue"),B(),D.getToken()===17?t.allowEmptyContent?!0:(m(4,[],[]),!1):H()?(D.getToken()!==17&&m(9,[],[]),!0):(m(4,[],[]),!1)}s(bD,"ye"),F(bD,"visit");var yD;(function(u){u[u.None=0]="None",u[u.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",u[u.UnexpectedEndOfString=2]="UnexpectedEndOfString",u[u.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",u[u.InvalidUnicode=4]="InvalidUnicode",u[u.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",u[u.InvalidCharacter=6]="InvalidCharacter"})(yD||(yD={}));var wD;(function(u){u[u.OpenBraceToken=1]="OpenBraceToken",u[u.CloseBraceToken=2]="CloseBraceToken",u[u.OpenBracketToken=3]="OpenBracketToken",u[u.CloseBracketToken=4]="CloseBracketToken",u[u.CommaToken=5]="CommaToken",u[u.ColonToken=6]="ColonToken",u[u.NullKeyword=7]="NullKeyword",u[u.TrueKeyword=8]="TrueKeyword",u[u.FalseKeyword=9]="FalseKeyword",u[u.StringLiteral=10]="StringLiteral",u[u.NumericLiteral=11]="NumericLiteral",u[u.LineCommentTrivia=12]="LineCommentTrivia",u[u.BlockCommentTrivia=13]="BlockCommentTrivia",u[u.LineBreakTrivia=14]="LineBreakTrivia",u[u.Trivia=15]="Trivia",u[u.Unknown=16]="Unknown",u[u.EOF=17]="EOF"})(wD||(wD={}));const Zt=AD;var $D;(function(u){u[u.InvalidSymbol=1]="InvalidSymbol",u[u.InvalidNumberFormat=2]="InvalidNumberFormat",u[u.PropertyNameExpected=3]="PropertyNameExpected",u[u.ValueExpected=4]="ValueExpected",u[u.ColonExpected=5]="ColonExpected",u[u.CommaExpected=6]="CommaExpected",u[u.CloseBraceExpected=7]="CloseBraceExpected",u[u.CloseBracketExpected=8]="CloseBracketExpected",u[u.EndOfFileExpected=9]="EndOfFileExpected",u[u.InvalidCommentToken=10]="InvalidCommentToken",u[u.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",u[u.UnexpectedEndOfString=12]="UnexpectedEndOfString",u[u.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",u[u.InvalidUnicode=14]="InvalidUnicode",u[u.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",u[u.InvalidCharacter=16]="InvalidCharacter"})($D||($D={}));const vD=F((u,e)=>Zt(Jt(e,u,"utf8")),"readJsonc"),vu=Symbol("implicitBaseUrl"),N="${configDir}",Ht=F(()=>{const{findPnpApi:u}=Uu;return u&&u(process.cwd())},"getPnpApi"),xu=F((u,e,t,D)=>{const r=`resolveFromPackageJsonPath:${u}:${e}:${t}`;if(D!=null&&D.has(r))return D.get(r);const n=vD(u,D);if(!n)return;let o=e||"tsconfig.json";if(!t&&n.exports)try{const[i]=Gt(n.exports,e,["require","types"]);o=i}catch{return!1}else!e&&n.tsconfig&&(o=n.tsconfig);return o=h.join(u,"..",o),D?.set(r,o),o},"resolveFromPackageJsonPath"),Ou="package.json",ku="tsconfig.json",Yt=F((u,e,t)=>{let D=u;if(u===".."&&(D=h.join(D,ku)),u[0]==="."&&(D=h.resolve(e,D)),h.isAbsolute(D)){if(j(t,D)){if(tu(t,D).isFile())return D}else if(!D.endsWith(".json")){const d=`${D}.json`;if(j(t,d))return d}return}const[r,...n]=u.split("/"),o=r[0]==="@"?`${r}/${n.shift()}`:r,i=n.join("/"),a=Ht();if(a){const{resolveRequest:d}=a;try{if(o===u){const E=d(h.join(o,Ou),e);if(E){const g=xu(E,i,!1,t);if(g&&j(t,g))return g}}else{let E;try{E=d(u,e,{extensions:[".json"]})}catch{E=d(h.join(u,ku),e)}if(E)return E}}catch{}}const l=gD(h.resolve(e),h.join("node_modules",o),t);if(!l||!tu(t,l).isDirectory())return;const f=h.join(l,Ou);if(j(t,f)){const d=xu(f,i,!1,t);if(d===!1)return;if(d&&j(t,d)&&tu(t,d).isFile())return d}const C=h.join(l,i),c=C.endsWith(".json");if(!c){const d=`${C}.json`;if(j(t,d))return d}if(j(t,C)){if(tu(t,C).isDirectory()){const d=h.join(C,Ou);if(j(t,d)){const g=xu(d,"",!0,t);if(g&&j(t,g))return g}const E=h.join(C,ku);if(j(t,E))return E}else if(c)return C}},"resolveExtendsPath"),ju=F((u,e)=>$u(h.relative(u,e)),"pathRelative"),xD=["files","include","exclude"],Qt=F((u,e,t,D)=>{const r=Yt(u,e,D);if(!r)throw new Error(`File '${u}' not found.`);if(t.has(r))throw new Error(`Circularity detected while resolving configuration: ${r}`);t.add(r);const n=h.dirname(r),o=OD(r,D,t);delete o.references;const{compilerOptions:i}=o;if(i){const{baseUrl:a}=i;a&&!a.startsWith(N)&&(i.baseUrl=O(h.relative(e,h.join(n,a)))||"./");let{outDir:l}=i;l&&(l.startsWith(N)||(l=h.relative(e,h.join(n,l))),i.outDir=O(l)||"./")}for(const a of xD){const l=o[a];l&&(o[a]=l.map(f=>f.startsWith(N)?f:O(h.relative(e,h.join(n,f)))))}return o},"resolveExtends"),Xt=["outDir","declarationDir"],OD=F((u,e,t=new Set)=>{let D;try{D=vD(u,e)||{}}catch{throw new Error(`Cannot resolve tsconfig at path: ${u}`)}if(typeof D!="object")throw new SyntaxError(`Failed to parse tsconfig at: ${u}`);const r=h.dirname(u);if(D.compilerOptions){const{compilerOptions:n}=D;n.paths&&!n.baseUrl&&(n[vu]=r)}if(D.extends){const n=Array.isArray(D.extends)?D.extends:[D.extends];delete D.extends;for(const o of n.reverse()){const i=Qt(o,r,new Set(t),e),a={...i,...D,compilerOptions:{...i.compilerOptions,...D.compilerOptions}};i.watchOptions&&(a.watchOptions={...i.watchOptions,...D.watchOptions}),D=a}}if(D.compilerOptions){const{compilerOptions:n}=D,o=["baseUrl","rootDir"];for(const i of o){const a=n[i];if(a&&!a.startsWith(N)){const l=h.resolve(r,a),f=ju(r,l);n[i]=f}}for(const i of Xt){let a=n[i];a&&(Array.isArray(D.exclude)||(D.exclude=[]),D.exclude.includes(a)||D.exclude.push(a),a.startsWith(N)||(a=$u(a)),n[i]=a)}}else D.compilerOptions={};if(D.include?(D.include=D.include.map(O),D.files&&delete D.files):D.files&&(D.files=D.files.map(n=>n.startsWith(N)?n:$u(n))),D.watchOptions){const{watchOptions:n}=D;n.excludeDirectories&&(n.excludeDirectories=n.excludeDirectories.map(o=>O(h.resolve(r,o))))}return D},"_parseTsconfig"),ou=F((u,e)=>{if(u.startsWith(N))return O(h.join(e,u.slice(N.length)))},"interpolateConfigDir"),ur=["outDir","declarationDir","outFile","rootDir","baseUrl","tsBuildInfoFile"],kD=F((u,e=new Map)=>{const t=h.resolve(u),D=OD(t,e),r=h.dirname(t),{compilerOptions:n}=D;if(n){for(const i of ur){const a=n[i];if(a){const l=ou(a,r);n[i]=l?ju(r,l):a}}for(const i of["rootDirs","typeRoots"]){const a=n[i];a&&(n[i]=a.map(l=>{const f=ou(l,r);return f?ju(r,f):l}))}const{paths:o}=n;if(o)for(const i of Object.keys(o))o[i]=o[i].map(a=>{var l;return(l=ou(a,r))!=null?l:a})}for(const o of xD){const i=D[o];i&&(D[o]=i.map(a=>{var l;return(l=ou(a,r))!=null?l:a}))}return D},"parseTsconfig"),Dr=F((u=process.cwd(),e="tsconfig.json",t=new Map)=>{const D=gD(O(u),e,t);if(!D)return null;const r=kD(D,t);return{path:D,config:r}},"getTsconfig"),er=/\*/g,jD=F((u,e)=>{const t=u.match(er);if(t&&t.length>1)throw new Error(e)},"assertStarCount"),tr=F(u=>{if(u.includes("*")){const[e,t]=u.split("*");return{prefix:e,suffix:t}}return u},"parsePattern"),rr=F(({prefix:u,suffix:e},t)=>t.startsWith(u)&&t.endsWith(e),"isPatternMatch"),nr=F((u,e,t)=>Object.entries(u).map(([D,r])=>(jD(D,`Pattern '${D}' can have at most one '*' character.`),{pattern:tr(D),substitutions:r.map(n=>{if(jD(n,`Substitution '${n}' in pattern '${D}' can have at most one '*' character.`),!e&&!wu.test(n))throw new Error("Non-relative paths are not allowed when 'baseUrl' is not set. Did you forget a leading './'?");return h.resolve(t,n)})})),"parsePaths"),or=F(u=>{const{compilerOptions:e}=u.config;if(!e)return null;const{baseUrl:t,paths:D}=e;if(!t&&!D)return null;const r=vu in e&&e[vu],n=h.resolve(h.dirname(u.path),t||r||"."),o=D?nr(D,t,n):[];return i=>{if(wu.test(i))return[];const a=[];for(const c of o){if(c.pattern===i)return c.substitutions.map(O);typeof c.pattern!="string"&&a.push(c)}let l,f=-1;for(const c of a)rr(c.pattern,i)&&c.pattern.prefix.length>f&&(f=c.pattern.prefix.length,l=c);if(!l)return t?[O(h.join(n,i))]:[];const C=i.slice(l.pattern.prefix.length,i.length-l.pattern.suffix.length);return l.substitutions.map(c=>O(c.replace("*",C)))}},"createPathsMatcher"),TD=F(u=>{let e="";for(let t=0;t<u.length;t+=1){const D=u[t],r=D.toUpperCase();e+=D===r?D.toLowerCase():r}return e},"s"),sr=65,ir=97,ar=F(()=>Math.floor(Math.random()*26),"m"),lr=F(u=>Array.from({length:u},()=>String.fromCodePoint(ar()+(Math.random()>.5?sr:ir))).join(""),"S"),cr=F((u=te)=>{const e=process.execPath;if(u.existsSync(e))return!u.existsSync(TD(e));const t=`/${lr(10)}`;u.writeFileSync(t,"");const D=!u.existsSync(TD(t));return u.unlinkSync(t),D},"l"),{join:su}=h.posix,Tu={ts:[".ts",".tsx",".d.ts"],cts:[".cts",".d.cts"],mts:[".mts",".d.mts"]},Fr=F(u=>{const e=[...Tu.ts],t=[...Tu.cts],D=[...Tu.mts];return u!=null&&u.allowJs&&(e.push(".js",".jsx"),t.push(".cjs"),D.push(".mjs")),[...e,...t,...D]},"getSupportedExtensions"),Cr=F(u=>{const e=[];if(!u)return e;const{outDir:t,declarationDir:D}=u;return t&&e.push(t),D&&e.push(D),e},"getDefaultExcludeSpec"),SD=F(u=>u.replaceAll(/[.*+?^${}()|[\]\\]/g,String.raw`\$&`),"escapeForRegexp"),fr=["node_modules","bower_components","jspm_packages"],Su=`(?!(${fr.join("|")})(/|$))`,pr=/(?:^|\/)[^.*?]+$/,PD="**/*",iu="[^/]",Pu="[^./]",ND=process.platform==="win32";F(({config:u,path:e},t=cr())=>{if("extends"in u)throw new Error("tsconfig#extends must be resolved. Use getTsconfig or parseTsconfig to resolve it.");if(!h.isAbsolute(e))throw new Error("The tsconfig path must be absolute");ND&&(e=O(e));const D=h.dirname(e),{files:r,include:n,exclude:o,compilerOptions:i}=u,a=r?.map(E=>su(D,E)),l=Fr(i),f=t?"":"i",C=(o||Cr(i)).map(E=>{const g=su(D,E),b=SD(g).replaceAll(String.raw`\*\*/`,"(.+/)?").replaceAll(String.raw`\*`,`${iu}*`).replaceAll(String.raw`\?`,iu);return new RegExp(`^${b}($|/)`,f)}),c=r||n?n:[PD],d=c?c.map(E=>{let g=su(D,E);pr.test(g)&&(g=su(g,PD));const b=SD(g).replaceAll(String.raw`/\*\*`,`(/${Su}${Pu}${iu}*)*?`).replaceAll(/(\/)?\\\*/g,(k,v)=>{const p=`(${Pu}|(\\.(?!min\\.js$))?)*`;return v?`/${Su}${Pu}${p}`:p}).replaceAll(/(\/)?\\\?/g,(k,v)=>{const p=iu;return v?`/${Su}${p}`:p});return new RegExp(`^${b}$`,f)}):void 0;return E=>{if(!h.isAbsolute(E))throw new Error("filePath must be absolute");if(ND&&(E=O(E)),a!=null&&a.includes(E)||!(!l.some(g=>E.endsWith(g))||C.some(g=>g.test(E)))&&d&&d.some(g=>g.test(E)))return u}},"createFilesMatcher");const ID="resolve-tsconfig-paths",Er=s(u=>u[0]===".","isRelative"),dr=s(u=>u[0]==="/"||/^[\s\S]:/.test(u),"isAbsolute"),hr=s(u=>u[0]==="#","isImports"),RD=s(u=>{const e=or(u);return e?{name:ID,async resolveId(t,D,r){if(!D||Er(t)||dr(t)||hr(t)||t.startsWith("\0"))return null;const n=e(t);for(const o of n){const i=await this.resolve(o,D,{skipSelf:!0,...r});if(i)return i}return null}}:{name:ID}},"resolveTsconfigPaths"),_D=/^#!.*/,gr=s(()=>({name:"strip-hashbang",transform:s(u=>{if(!_D.test(u))return null;const e=new qu(u);return e.replace(_D,""),{code:e.toString(),map:e.generateMap({hires:!0})}},"transform")}),"stripHashbang"),mr=["peerDependencies","dependencies","optionalDependencies"],Nu="@types/",LD=s((u,e,t=!1)=>{const D=[],{devDependencies:r}=u;for(const n of mr){const o=u[n];if(!o)continue;const i=Object.keys(o);for(const a of i)if(!(a in e))if(a.startsWith(Nu)){if(t){let l=a.slice(Nu.length);l.includes("__")&&(l=`@${l.replace("__","/")}`),D.push(l)}}else{if(r&&t){const l=Nu+a.replace("@","").replace("/","__");r[l]&&!(l in o)&&console.warn(`Recommendation: "${l}" is externalized because "${a}" is in "${n}". Place "${l}" in "${n}" as well so users don't have missing types.`)}D.push(a)}}return D.flatMap(n=>[n,new RegExp(`^${n}/`)])},"getExternalDependencies"),MD=s(u=>u.split("?")[0],"stripQuery"),WD={type:s(async(u,e)=>{const[t,D]=await Promise.all([Promise.resolve().then(function(){return require("./rollup-plugin-dts-wFwILfkI.js")}),Promise.resolve().then(function(){return require("./local-typescript-loader-DFqhlpcR.js")}).then(function(r){return r.localTypescriptLoader})]);return{input:[],preserveEntrySignatures:"strict",plugins:[fD(u),...e?[RD(e)]:[],pD(),t.default({respectExternal:!1,compilerOptions:{composite:!1,preserveSymlinks:!1,module:D.default.ModuleKind.Preserve,moduleResolution:D.default.ModuleResolutionKind.Bundler},tsconfig:e?.path})],output:[],external:[]}},"type"),app:s((u,e,t,D,r)=>{const n={target:u.target,tsconfigRaw:r?.config};return{input:[],preserveEntrySignatures:"strict",plugins:[fD(u),...r?[RD(r)]:[],pD(),XD({entries:e}),HD({extensions:[".mjs",".js",".ts",".jsx",".tsx",".json"],exportConditions:u.exportCondition}),...Object.keys(t).length>0?[Mu({preventAssignment:!0,objectGuards:!0,values:t})]:[],gr(),YD(),QD(),Pt(n),Tt(),ue({warnOnError:!0}),...u.minify?[It(n)]:[],Rt(D)],output:[],external:[]}},"app")},Br=s(async(u,e,t,D,r,n,o)=>{const i=t.filter(({exportEntry:c})=>c.isExecutable).map(({exportEntry:c})=>c.outputPath),a=Object.create(null),l=Object.fromEntries(D.env.map(({key:c,value:d})=>[`process.env.${c}`,JSON.stringify(d)])),f=LD(n,r),C=LD(n,r,!0);for(const{input:c,srcExtension:d,distExtension:E,exportEntry:g}of t){if(g.type==="types"){let B=a.type;B||(B=await WD.type(D,o),B.external=C,a.type=B),B.input.includes(c)||B.input.push(c),B.output.push({dir:e,entryFileNames:s(m=>S.realpathSync.native(MD(m.facadeModuleId)).slice(u.length,-d.length)+E,"entryFileNames"),exports:"auto",format:"esm"});continue}let b=a.app;b||(b=WD.app(D,r,l,i,o),b.external=f,a.app=b),b.input.includes(c)||b.input.push(c);const k=b.output,v=h.extname(g.outputPath),p=`${g.type}-${v}`;if(!k[p]){const B={dir:e,exports:"auto",format:g.type,chunkFileNames:`[name]-[hash]${v}`,sourcemap:D.sourcemap,plugins:[St(g.type==="module")],entryFileNames:s(m=>{const w=S.realpathSync.native(MD(m.facadeModuleId)).slice(u.length);return h.join(h.dirname(w),m.name)+E},"entryFileNames")};k.push(B),k[p]=B}}return a},"getRollupConfigs"),Ar=s(u=>{if(!u)return Dr();const e=h.resolve(u),t=kD(e);return{path:e,config:t}},"getTsconfig");let _=!0;const V=typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{};let J=0;if(V.process&&V.process.env&&V.process.stdout){const{FORCE_COLOR:u,NODE_DISABLE_COLORS:e,NO_COLOR:t,TERM:D,COLORTERM:r}=V.process.env;e||t||u==="0"?_=!1:u==="1"||u==="2"||u==="3"?_=!0:D==="dumb"?_=!1:"CI"in V.process.env&&["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(n=>n in V.process.env)?_=!0:_=process.stdout.isTTY,_&&(process.platform==="win32"||r&&(r==="truecolor"||r==="24bit")?J=3:D&&(D.endsWith("-256color")||D.endsWith("256"))?J=2:J=1)}let UD={enabled:_,supportLevel:J};function br(u,e,t=1){const D=`\x1B[${u}m`,r=`\x1B[${e}m`,n=new RegExp(`\\x1b\\[${e}m`,"g");return o=>UD.enabled&&UD.supportLevel>=t?D+(""+o).replace(n,D)+r:""+o}s(br,"kolorist");const yr=br(90,39),wr=s(()=>new Date().toLocaleTimeString(),"currentTime"),au=s((...u)=>console.log(`[${yr(wr())}]`,...u),"log"),$r=s(async u=>{await hu(u)&&await S.promises.rm(u,{recursive:!0,force:!0})},"cleanDist"),{stringify:qD}=JSON,L=At({name:"pkgroll",version:bt,flags:{src:{type:String,description:"Source directory",default:"./src"},dist:{type:String,description:"Distribution directory",default:"./dist"},minify:{type:Boolean,description:"Minify output",alias:"m",default:!1},target:{type:[String],default:[`node${process.versions.node}`],description:"Environments to support. `target` in tsconfig.json is automatically added. Defaults to the current Node.js version.",alias:"t"},tsconfig:{type:String,description:"Custom tsconfig.json file path",alias:"p"},watch:{type:Boolean,description:"Watch mode",alias:"w",default:!1},env:{type:[u=>{const[e,t]=u.split("=");return{key:e,value:t}}],description:"Compile-time environment variables (eg. --env.NODE_ENV=production)"},exportCondition:{type:[String],description:"Export conditions for resolving dependency export and import maps (eg. --export-condition=node)"},sourcemap:{type:s(u=>{if(u==="")return!0;if(u==="inline")return u;throw new Error(`Invalid sourcemap option ${qD(u)}`)},"type"),description:"Sourcemap generation. Provide `inline` option for inline sourcemap (eg. --sourcemap, --sourcemap=inline)"},cleanDist:{type:Boolean,description:"Clean dist before bundling",default:!1}},help:{description:"Minimalistic package bundler",render:s((u,e)=>(e.flagOperator=t=>t.name==="env"?".key=":" ",e.render(u)),"render")}}),VD=process.cwd(),zD=eu(L.flags.src,!0),Z=eu(L.flags.dist,!0),GD=Ar(L.flags.tsconfig),KD=GD?.config.compilerOptions?.target;KD&&L.flags.target.push(KD),(async()=>{const u=await yt(VD);let e=$t(u);if(e=e.filter(r=>{const n=r.outputPath.startsWith(Z);return n||console.warn(`Ignoring entry outside of ${Z} directory: package.json#${r.from}=${qD(r.outputPath)}`),n}),e.length===0)throw new Error("No export entries found in package.json");const t=await Promise.all(e.map(async r=>({...await jt(r,zD,Z),exportEntry:r}))),D=await Br(eu(S.realpathSync.native(zD),!0),Z,t,L.flags,vt(u,VD),u,GD);L.flags.cleanDist&&await $r(Z),L.flags.watch?(au("Watch initialized"),Object.values(D).map(async r=>{Lu.watch(r).on("event",async o=>{o.code==="BUNDLE_START"&&au("Building",...Array.isArray(o.input)?o.input:[o.input]),o.code==="BUNDLE_END"&&(await Promise.all(r.output.map(i=>o.result.write(i))),au("Built",...Array.isArray(o.input)?o.input:[o.input])),o.code==="ERROR"&&au("Error:",o.error.message)})})):await Promise.all(Object.values(D).map(async r=>{const n=await Lu.rollup(r);return Promise.all(r.output.map(o=>n.write(o)))}))})().catch(u=>{console.error(u),process.exit(1)});
